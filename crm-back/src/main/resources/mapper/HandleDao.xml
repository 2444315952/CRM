<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crm.dao.HandleDao">
  <resultMap id="BaseResultMap" type="com.crm.entity.Handle">
    <id column="hId" jdbcType="INTEGER" property="hid" />
    <result column="hand_id" jdbcType="VARCHAR" property="handId" />
    <result column="hand_action" jdbcType="VARCHAR" property="handAction" />
    <result column="hand_way" jdbcType="VARCHAR" property="handWay" />
    <result column="billId" jdbcType="INTEGER" property="billid" />
    <result column="createTime" jdbcType="TIMESTAMP" property="createtime" />
    <result column="hand_stauts" jdbcType="VARCHAR" property="handStauts" />
    <result column="hand_time" jdbcType="TIMESTAMP" property="handTime" />
    <result column="hand_emp" jdbcType="VARCHAR" property="handEmp" />
    <result column="hand_date" jdbcType="TIMESTAMP" property="handDate" />
    <result column="sum_num" jdbcType="INTEGER" property="sumNum" />
  </resultMap>
  <sql id="Base_Column_List">
    hId, hand_id, hand_action, hand_way, billId, createTime, hand_stauts, hand_time, 
    hand_emp, hand_date, sum_num
  </sql>
  <select id="findIfHandlerOInStore" resultType="Map">
    select ha.hand_id,ha.hand_action,ha.hand_way,ha.sum_num,ha.hand_stauts,ha.hand_emp,ha.createTime,
            sale.sale_order_name,
            pro.pro_name
    from handle ha,handle_product hap,product pro,sale_order sale
    where ha.hId=hap.hId and ha.billId=sale.sale_order_id and pro.pro_id=hap.pro_id and ha.hand_stauts='未办理'
  </select>



  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from handle
    where hId = #{hid,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from handle
    where hId = #{hid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" keyColumn="hId" keyProperty="hid" parameterType="com.crm.entity.Handle" useGeneratedKeys="true">
    insert into handle (hand_id, hand_action, hand_way, 
      billId, createTime, hand_stauts, 
      hand_time, hand_emp, hand_date, 
      sum_num)
    values (#{handId,jdbcType=VARCHAR}, #{handAction,jdbcType=VARCHAR}, #{handWay,jdbcType=VARCHAR}, 
      #{billid,jdbcType=INTEGER}, #{createtime,jdbcType=TIMESTAMP}, #{handStauts,jdbcType=VARCHAR}, 
      #{handTime,jdbcType=TIMESTAMP}, #{handEmp,jdbcType=VARCHAR}, #{handDate,jdbcType=TIMESTAMP}, 
      #{sumNum,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" keyColumn="hId" keyProperty="hid" parameterType="com.crm.entity.Handle" useGeneratedKeys="true">
    insert into handle
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="handId != null">
        hand_id,
      </if>
      <if test="handAction != null">
        hand_action,
      </if>
      <if test="handWay != null">
        hand_way,
      </if>
      <if test="billid != null">
        billId,
      </if>
      <if test="createtime != null">
        createTime,
      </if>
      <if test="handStauts != null">
        hand_stauts,
      </if>
      <if test="handTime != null">
        hand_time,
      </if>
      <if test="handEmp != null">
        hand_emp,
      </if>
      <if test="handDate != null">
        hand_date,
      </if>
      <if test="sumNum != null">
        sum_num,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="handId != null">
        #{handId,jdbcType=VARCHAR},
      </if>
      <if test="handAction != null">
        #{handAction,jdbcType=VARCHAR},
      </if>
      <if test="handWay != null">
        #{handWay,jdbcType=VARCHAR},
      </if>
      <if test="billid != null">
        #{billid,jdbcType=INTEGER},
      </if>
      <if test="createtime != null">
        #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="handStauts != null">
        #{handStauts,jdbcType=VARCHAR},
      </if>
      <if test="handTime != null">
        #{handTime,jdbcType=TIMESTAMP},
      </if>
      <if test="handEmp != null">
        #{handEmp,jdbcType=VARCHAR},
      </if>
      <if test="handDate != null">
        #{handDate,jdbcType=TIMESTAMP},
      </if>
      <if test="sumNum != null">
        #{sumNum,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.crm.entity.Handle">
    update handle
    <set>
      <if test="handId != null">
        hand_id = #{handId,jdbcType=VARCHAR},
      </if>
      <if test="handAction != null">
        hand_action = #{handAction,jdbcType=VARCHAR},
      </if>
      <if test="handWay != null">
        hand_way = #{handWay,jdbcType=VARCHAR},
      </if>
      <if test="billid != null">
        billId = #{billid,jdbcType=INTEGER},
      </if>
      <if test="createtime != null">
        createTime = #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="handStauts != null">
        hand_stauts = #{handStauts,jdbcType=VARCHAR},
      </if>
      <if test="handTime != null">
        hand_time = #{handTime,jdbcType=TIMESTAMP},
      </if>
      <if test="handEmp != null">
        hand_emp = #{handEmp,jdbcType=VARCHAR},
      </if>
      <if test="handDate != null">
        hand_date = #{handDate,jdbcType=TIMESTAMP},
      </if>
      <if test="sumNum != null">
        sum_num = #{sumNum,jdbcType=INTEGER},
      </if>
    </set>
    where hId = #{hid,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.crm.entity.Handle">
    update handle
    set hand_id = #{handId,jdbcType=VARCHAR},
      hand_action = #{handAction,jdbcType=VARCHAR},
      hand_way = #{handWay,jdbcType=VARCHAR},
      billId = #{billid,jdbcType=INTEGER},
      createTime = #{createtime,jdbcType=TIMESTAMP},
      hand_stauts = #{handStauts,jdbcType=VARCHAR},
      hand_time = #{handTime,jdbcType=TIMESTAMP},
      hand_emp = #{handEmp,jdbcType=VARCHAR},
      hand_date = #{handDate,jdbcType=TIMESTAMP},
      sum_num = #{sumNum,jdbcType=INTEGER}
    where hId = #{hid,jdbcType=INTEGER}
  </update>
</mapper>